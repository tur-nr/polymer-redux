dist: trusty

sudo: true

language: node_js

env:
- SELENIUM_OVERRIDES_CONFIG=$TRAVIS_BUILD_DIR/package.json

node_js: stable

addons:
    firefox: latest
    apt:
        sources:
        - google-chrome
        packages:
        - google-chrome-stable

cache:
    yarn: false

before_script:
# fix wct-local bug => read config from env var
- sed -i.bak "s/'..\/package.json'/process.env.SELENIUM_OVERRIDES_CONFIG/g" node_modules/wct-local/lib/selenium.js
# check the patched js
- cat node_modules/wct-local/lib/selenium.js

script:
- yarn test
